# 第二章 程序结构

## 2.1 名称

- Go 有25个关键字。30多个预声明的常量，类型和函数（可以重声明，但是有风险）。（见书第20页）

- 包级别的声明对包里的**所有文件**可见，大写字母开头表示它是**导出**的。

- 包名本身用**小写**字母组成

- 命名采用驼峰式

## 2.2 声明

- 有4个主要的声明：变量（var），常量（const），类型（type），函数（func）

## 2.3 变量

```go
// 类型和表达式可以省略其中一个
var name type = expression
```

- Go中不存在未初始化变量，各种类型的0值：

|类型|0值|
|-|-|
|数字|0|
|布尔值|false|
|字符串|""|
|接口和引用类型（slice，指针，map，通道，函数）|nil|
|复合类型（数组，结构体）|元素或成员的0值|

- 忽略类型允许声明多个不同类型的变量：

```go
var b, f, s = true, 2.3, "four"
```

- 包级别的变量初始化在 main 开始之前进行。函数级别的在函数执行期间进行。

### 2.3.1 短变量声明

- := 表示声明，= 表示赋值

- 在 **局部** 变量的声明和初始化中主要使用短声明

- 使用 var 声明有两种情况：

    - 初始化表达式和类型不一致：
        ```go
        var f float64 = 100
        ```

    - 初始值不重要，后面才赋值：
        ```go
        var names []string
        var p Point
        ```

- 只有对可读性有帮助时才使用多个表达式初始化变量，例如 for 循环的初始化：

```go
for i, j := 0, 0; //...
```

- 在多个左值的声明中，短变量声明至少声明一个新变量：

```go
in, err := os.Open(infile)
// out为新变量
out, err := os.Create(outfile)
```

- 只有在同一个词法块中变量已经存在的情况下，短声明行为才和赋值一样。外层的声明将被忽略。

### 2.3.2 指针

### 2.3.3 new 函数

### 2.3.4 变量的声明周期